// This file was auto-generated by Fern from our API Definition.

import * as KardApi from "../../src/api/index";
import { KardApiClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("ExperimentsClient", () => {
    test("listExperiments (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    id: "3fc40dd7-f74e-40fc-8236-027fb98ae8a5",
                    type: "experiment",
                    attributes: { name: "Experiment 1" },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
                {
                    id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    type: "experiment",
                    attributes: { name: "Experiment 2" },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
            ],
            links: {
                self: "/v2/experiments?page[size]=10&page[after]=1&page[before]=1&filter[q]=test&sort[name]=ASC",
                next: "/v2/experiments?page[size]=10&page[after]=2&page[before]=1&filter[q]=test&sort[name]=ASC",
                prev: "/v2/experiments?page[size]=10&page[after]=0&page[before]=1&filter[q]=test&sort[name]=ASC",
            },
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.listExperiments();
        expect(response).toEqual({
            data: [
                {
                    id: "3fc40dd7-f74e-40fc-8236-027fb98ae8a5",
                    type: "experiment",
                    attributes: {
                        name: "Experiment 1",
                    },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
                {
                    id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    type: "experiment",
                    attributes: {
                        name: "Experiment 2",
                    },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
            ],
            links: {
                self: "/v2/experiments?page[size]=10&page[after]=1&page[before]=1&filter[q]=test&sort[name]=ASC",
                next: "/v2/experiments?page[size]=10&page[after]=2&page[before]=1&filter[q]=test&sort[name]=ASC",
                prev: "/v2/experiments?page[size]=10&page[after]=0&page[before]=1&filter[q]=test&sort[name]=ASC",
            },
        });
    });

    test("listExperiments (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    id: "3fc40dd7-f74e-40fc-8236-027fb98ae8a5",
                    type: "experiment",
                    attributes: { name: "Experiment 1" },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
                {
                    id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    type: "experiment",
                    attributes: { name: "Experiment 2" },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
            ],
            links: {
                self: "/v2/experiments?page[size]=10&page[after]=1&page[before]=1&filter[q]=test&sort[name]=ASC",
                next: "/v2/experiments?page[size]=10&page[after]=2&page[before]=1&filter[q]=test&sort[name]=ASC",
                prev: "/v2/experiments?page[size]=10&page[after]=0&page[before]=1&filter[q]=test&sort[name]=ASC",
            },
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.listExperiments({
            filter: {
                q: "test",
                "createdAt[gte]": "2021-01-01T00:00:00Z",
                "createdAt[lte]": "2021-01-01T00:00:00Z",
            },
            sort: {
                name: "ASC",
            },
        });
        expect(response).toEqual({
            data: [
                {
                    id: "3fc40dd7-f74e-40fc-8236-027fb98ae8a5",
                    type: "experiment",
                    attributes: {
                        name: "Experiment 1",
                    },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
                {
                    id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    type: "experiment",
                    attributes: {
                        name: "Experiment 2",
                    },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
            ],
            links: {
                self: "/v2/experiments?page[size]=10&page[after]=1&page[before]=1&filter[q]=test&sort[name]=ASC",
                next: "/v2/experiments?page[size]=10&page[after]=2&page[before]=1&filter[q]=test&sort[name]=ASC",
                prev: "/v2/experiments?page[size]=10&page[after]=0&page[before]=1&filter[q]=test&sort[name]=ASC",
            },
        });
    });

    test("listExperiments (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [],
            links: { self: "/v2/experiments?page[size]=10&page[after]=1&page[before]=1&filter[q]=test&sort[name]=ASC" },
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.listExperiments({
            filter: {
                q: "some experiment name that doesn't exist",
            },
        });
        expect(response).toEqual({
            data: [],
            links: {
                self: "/v2/experiments?page[size]=10&page[after]=1&page[before]=1&filter[q]=test&sort[name]=ASC",
            },
        });
    });

    test("listExperiments (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.listExperiments();
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("listExperiments (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.listExperiments();
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("listExperiments (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.listExperiments();
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("getExperimentById (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "experiment",
            attributes: { name: "Experiment 1" },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/3fc40dd7-f74e-40fc-8236-027fb98ae8a5")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.getExperimentById({
            id: "3fc40dd7-f74e-40fc-8236-027fb98ae8a5",
        });
        expect(response).toEqual({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "experiment",
            attributes: {
                name: "Experiment 1",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        });
    });

    test("getExperimentById (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.getExperimentById({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("getExperimentById (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.getExperimentById({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("getExperimentById (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.getExperimentById({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("getExperimentById (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.getExperimentById({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.DoesNotExistError);
    });

    test("createExperiment (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { type: "experiment", attributes: { name: "Experiment 1" } };
        const rawResponseBody = {
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "experiment",
            attributes: { name: "Experiment 1" },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.createExperiment({
            type: "experiment",
            attributes: {
                name: "Experiment 1",
            },
        });
        expect(response).toEqual({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "experiment",
            attributes: {
                name: "Experiment 1",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        });
    });

    test("createExperiment (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { type: "experiment", attributes: { name: "name" } };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.createExperiment({
                type: "experiment",
                attributes: {
                    name: "name",
                },
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("createExperiment (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { type: "experiment", attributes: { name: "name" } };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.createExperiment({
                type: "experiment",
                attributes: {
                    name: "name",
                },
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("createExperiment (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { type: "experiment", attributes: { name: "name" } };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.createExperiment({
                type: "experiment",
                attributes: {
                    name: "name",
                },
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("updateExperiment (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { type: "experiment", attributes: { name: "Experiment 1" } };
        const rawResponseBody = {
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "experiment",
            attributes: { name: "Experiment 1" },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/3fc40dd7-f74e-40fc-8236-027fb98ae8a5")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.updateExperiment({
            id: "3fc40dd7-f74e-40fc-8236-027fb98ae8a5",
            body: {
                type: "experiment",
                attributes: {
                    name: "Experiment 1",
                },
            },
        });
        expect(response).toEqual({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "experiment",
            attributes: {
                name: "Experiment 1",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        });
    });

    test("updateExperiment (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { type: "experiment", attributes: { name: "name" } };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.updateExperiment({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                body: {
                    type: "experiment",
                    attributes: {
                        name: "name",
                    },
                },
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("updateExperiment (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { type: "experiment", attributes: { name: "name" } };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.updateExperiment({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                body: {
                    type: "experiment",
                    attributes: {
                        name: "name",
                    },
                },
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("updateExperiment (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { type: "experiment", attributes: { name: "name" } };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.updateExperiment({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                body: {
                    type: "experiment",
                    attributes: {
                        name: "name",
                    },
                },
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("updateExperiment (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { type: "experiment", attributes: { name: "name" } };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.updateExperiment({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                body: {
                    type: "experiment",
                    attributes: {
                        name: "name",
                    },
                },
            });
        }).rejects.toThrow(KardApi.DoesNotExistError);
    });

    test("createOfferLink (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: {
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                status: "DRAFT",
            },
        };
        const rawResponseBody = {
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: { experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8", status: "DRAFT" },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/offer-links")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.createOfferLink({
            type: "offer_link",
            attributes: {
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                status: "DRAFT",
            },
        });
        expect(response).toEqual({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: {
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                status: "DRAFT",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        });
    });

    test("createOfferLink (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: {
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                rules: [],
                status: "COMPLETED",
            },
        };
        const rawResponseBody = {
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: {
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                rules: [],
                status: "COMPLETED",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/offer-links")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.createOfferLink({
            type: "offer_link",
            attributes: {
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                rules: [],
                status: "COMPLETED",
            },
        });
        expect(response).toEqual({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: {
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                rules: [],
                status: "COMPLETED",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        });
    });

    test("createOfferLink (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: { status: "DRAFT", experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32" },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/offer-links")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.createOfferLink({
                type: "offer_link",
                attributes: {
                    status: "DRAFT",
                    experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                },
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("createOfferLink (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: { status: "DRAFT", experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32" },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/offer-links")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.createOfferLink({
                type: "offer_link",
                attributes: {
                    status: "DRAFT",
                    experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                },
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("createOfferLink (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: { status: "DRAFT", experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32" },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/offer-links")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.createOfferLink({
                type: "offer_link",
                attributes: {
                    status: "DRAFT",
                    experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                },
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("createOfferLink (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: { status: "DRAFT", experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32" },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/portal/experiments/offer-links")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.createOfferLink({
                type: "offer_link",
                attributes: {
                    status: "DRAFT",
                    experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                },
            });
        }).rejects.toThrow(KardApi.DoesNotExistError);
    });

    test("listOfferLinks (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    type: "offer_link",
                    attributes: {
                        offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                        experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                        rules: [],
                        status: "COMPLETED",
                    },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
                {
                    id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    type: "offer_link",
                    attributes: { experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8", status: "DRAFT" },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.listOfferLinks({
            experimentId: "3fc40dd7-f74e-40fc-8236-027fb98ae8a5",
        });
        expect(response).toEqual({
            data: [
                {
                    id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    type: "offer_link",
                    attributes: {
                        offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                        experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                        rules: [],
                        status: "COMPLETED",
                    },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
                {
                    id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    type: "offer_link",
                    attributes: {
                        experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                        status: "DRAFT",
                    },
                    createdAt: "2021-01-01T00:00:00Z",
                    updatedAt: "2021-01-01T00:00:00Z",
                },
            ],
        });
    });

    test("listOfferLinks (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { data: [] };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.listOfferLinks({
            experimentId: "3fc40dd7-f74e-40fc-8236-027fb98ae8a5",
        });
        expect(response).toEqual({
            data: [],
        });
    });

    test("listOfferLinks (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.listOfferLinks({
                experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("listOfferLinks (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.listOfferLinks({
                experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("listOfferLinks (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.listOfferLinks({
                experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("getOfferLinkById (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: { experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8", status: "DRAFT" },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links/a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.getOfferLinkById({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
        });
        expect(response).toEqual({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: {
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                status: "DRAFT",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        });
    });

    test("getOfferLinkById (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: {
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                rules: [],
                status: "COMPLETED",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links/a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.getOfferLinkById({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
        });
        expect(response).toEqual({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: {
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                rules: [],
                status: "COMPLETED",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        });
    });

    test("getOfferLinkById (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.getOfferLinkById({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("getOfferLinkById (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.getOfferLinkById({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("getOfferLinkById (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.getOfferLinkById({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("getOfferLinkById (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.getOfferLinkById({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.DoesNotExistError);
    });

    test("updateOfferLink (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: {
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                status: "DRAFT",
            },
        };
        const rawResponseBody = {
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: { experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8", status: "DRAFT" },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/offer-links/a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.updateOfferLink({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            body: {
                type: "offer_link",
                attributes: {
                    experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    status: "DRAFT",
                },
            },
        });
        expect(response).toEqual({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: {
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                status: "DRAFT",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        });
    });

    test("updateOfferLink (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: {
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                rules: [],
                status: "COMPLETED",
            },
        };
        const rawResponseBody = {
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: {
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                rules: [],
                status: "COMPLETED",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/offer-links/a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.experiments.updateOfferLink({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            body: {
                type: "offer_link",
                attributes: {
                    experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                    rules: [],
                    status: "COMPLETED",
                },
            },
        });
        expect(response).toEqual({
            id: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
            type: "offer_link",
            attributes: {
                offerId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                experimentId: "a52cd8d3-a6a3-4819-a7e2-8bb5736f8ac8",
                rules: [],
                status: "COMPLETED",
            },
            createdAt: "2021-01-01T00:00:00Z",
            updatedAt: "2021-01-01T00:00:00Z",
        });
    });

    test("updateOfferLink (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: { status: "DRAFT", experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32" },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.updateOfferLink({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                body: {
                    type: "offer_link",
                    attributes: {
                        status: "DRAFT",
                        experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                    },
                },
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("updateOfferLink (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: { status: "DRAFT", experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32" },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.updateOfferLink({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                body: {
                    type: "offer_link",
                    attributes: {
                        status: "DRAFT",
                        experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                    },
                },
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("updateOfferLink (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: { status: "DRAFT", experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32" },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.updateOfferLink({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                body: {
                    type: "offer_link",
                    attributes: {
                        status: "DRAFT",
                        experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                    },
                },
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("updateOfferLink (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            type: "offer_link",
            attributes: { status: "DRAFT", experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32" },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.updateOfferLink({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                body: {
                    type: "offer_link",
                    attributes: {
                        status: "DRAFT",
                        experimentId: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
                    },
                },
            });
        }).rejects.toThrow(KardApi.DoesNotExistError);
    });

    test("deleteOfferLink (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        server
            .mockEndpoint()
            .delete("/portal/experiments/offer-links/3fc40dd7-f74e-40fc-8236-027fb98ae8a5")
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.experiments.deleteOfferLink({
            id: "3fc40dd7-f74e-40fc-8236-027fb98ae8a5",
        });
        expect(response).toEqual(undefined);
    });

    test("deleteOfferLink (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .delete("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.deleteOfferLink({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("deleteOfferLink (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .delete("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.deleteOfferLink({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("deleteOfferLink (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .delete("/portal/experiments/offer-links/d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.experiments.deleteOfferLink({
                id: "d5e9c84f-c2b2-4bf4-b4b0-7ffd7a9ffc32",
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });
});
