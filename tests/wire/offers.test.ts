// This file was auto-generated by Fern from our API Definition.

import * as KardApi from "../../src/api/index";
import { KardApiClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("OffersClient", () => {
    test("getOffers (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    type: "standardOffer",
                    id: "id",
                    attributes: {
                        name: "name",
                        offerType: "INSTORE",
                        merchantId: "merchantId",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                        userCommissionsMap: { userCommissionsMap: 1.1 },
                        isCustom: true,
                        terms: "terms",
                        minTransactionAmount: 1,
                        maxTransactionAmount: 1,
                        minRewardAmount: 1,
                        maxRewardAmount: 1,
                        minUserRewardAmount: 1,
                        maxUserRewardAmount: 1,
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        validOfferForIssuer: { validOfferForIssuer: true },
                        category: "category",
                        mcc: ["mcc", "mcc"],
                        displayAlways: true,
                        audiences: ["audiences", "audiences"],
                        segments: ["segments", "segments"],
                        partnerOfferId: "partnerOfferId",
                        isTargeted: true,
                        attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                        createdDate: "2024-01-15T09:30:00Z",
                        lastModified: "2024-01-15T09:30:00Z",
                    },
                    relationships: {
                        merchant: { data: { type: "type", id: "id" } },
                        merchantLocations: {
                            data: [
                                { type: "type", id: "id" },
                                { type: "type", id: "id" },
                            ],
                        },
                        audiences: {
                            data: [
                                { type: "type", id: "id" },
                                { type: "type", id: "id" },
                            ],
                        },
                        segments: {
                            data: [
                                { type: "type", id: "id" },
                                { type: "type", id: "id" },
                            ],
                        },
                    },
                },
                {
                    type: "standardOffer",
                    id: "id",
                    attributes: {
                        name: "name",
                        offerType: "INSTORE",
                        merchantId: "merchantId",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                        userCommissionsMap: { userCommissionsMap: 1.1 },
                        isCustom: true,
                        terms: "terms",
                        minTransactionAmount: 1,
                        maxTransactionAmount: 1,
                        minRewardAmount: 1,
                        maxRewardAmount: 1,
                        minUserRewardAmount: 1,
                        maxUserRewardAmount: 1,
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        validOfferForIssuer: { validOfferForIssuer: true },
                        category: "category",
                        mcc: ["mcc", "mcc"],
                        displayAlways: true,
                        audiences: ["audiences", "audiences"],
                        segments: ["segments", "segments"],
                        partnerOfferId: "partnerOfferId",
                        isTargeted: true,
                        attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                        createdDate: "2024-01-15T09:30:00Z",
                        lastModified: "2024-01-15T09:30:00Z",
                    },
                    relationships: {
                        merchant: { data: { type: "type", id: "id" } },
                        merchantLocations: {
                            data: [
                                { type: "type", id: "id" },
                                { type: "type", id: "id" },
                            ],
                        },
                        audiences: {
                            data: [
                                { type: "type", id: "id" },
                                { type: "type", id: "id" },
                            ],
                        },
                        segments: {
                            data: [
                                { type: "type", id: "id" },
                                { type: "type", id: "id" },
                            ],
                        },
                    },
                },
            ],
            links: { self: "self", prev: "prev", next: "next" },
            meta: { pageSize: 1, hasNextPage: true },
            included: [
                { id: "id", type: "merchant", attributes: { attributes: { key: "value" } } },
                { id: "id", type: "merchant", attributes: { attributes: { key: "value" } } },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.offers.getOffers();
        expect(response).toEqual({
            data: [
                {
                    type: "standardOffer",
                    id: "id",
                    attributes: {
                        name: "name",
                        offerType: "INSTORE",
                        merchantId: "merchantId",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        userCommissionsMap: {
                            userCommissionsMap: 1.1,
                        },
                        isCustom: true,
                        terms: "terms",
                        minTransactionAmount: 1,
                        maxTransactionAmount: 1,
                        minRewardAmount: 1,
                        maxRewardAmount: 1,
                        minUserRewardAmount: 1,
                        maxUserRewardAmount: 1,
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        validOfferForIssuer: {
                            validOfferForIssuer: true,
                        },
                        category: "category",
                        mcc: ["mcc", "mcc"],
                        displayAlways: true,
                        audiences: ["audiences", "audiences"],
                        segments: ["segments", "segments"],
                        partnerOfferId: "partnerOfferId",
                        isTargeted: true,
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                        createdDate: "2024-01-15T09:30:00Z",
                        lastModified: "2024-01-15T09:30:00Z",
                    },
                    relationships: {
                        merchant: {
                            data: {
                                type: "type",
                                id: "id",
                            },
                        },
                        merchantLocations: {
                            data: [
                                {
                                    type: "type",
                                    id: "id",
                                },
                                {
                                    type: "type",
                                    id: "id",
                                },
                            ],
                        },
                        audiences: {
                            data: [
                                {
                                    type: "type",
                                    id: "id",
                                },
                                {
                                    type: "type",
                                    id: "id",
                                },
                            ],
                        },
                        segments: {
                            data: [
                                {
                                    type: "type",
                                    id: "id",
                                },
                                {
                                    type: "type",
                                    id: "id",
                                },
                            ],
                        },
                    },
                },
                {
                    type: "standardOffer",
                    id: "id",
                    attributes: {
                        name: "name",
                        offerType: "INSTORE",
                        merchantId: "merchantId",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        userCommissionsMap: {
                            userCommissionsMap: 1.1,
                        },
                        isCustom: true,
                        terms: "terms",
                        minTransactionAmount: 1,
                        maxTransactionAmount: 1,
                        minRewardAmount: 1,
                        maxRewardAmount: 1,
                        minUserRewardAmount: 1,
                        maxUserRewardAmount: 1,
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        validOfferForIssuer: {
                            validOfferForIssuer: true,
                        },
                        category: "category",
                        mcc: ["mcc", "mcc"],
                        displayAlways: true,
                        audiences: ["audiences", "audiences"],
                        segments: ["segments", "segments"],
                        partnerOfferId: "partnerOfferId",
                        isTargeted: true,
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                        createdDate: "2024-01-15T09:30:00Z",
                        lastModified: "2024-01-15T09:30:00Z",
                    },
                    relationships: {
                        merchant: {
                            data: {
                                type: "type",
                                id: "id",
                            },
                        },
                        merchantLocations: {
                            data: [
                                {
                                    type: "type",
                                    id: "id",
                                },
                                {
                                    type: "type",
                                    id: "id",
                                },
                            ],
                        },
                        audiences: {
                            data: [
                                {
                                    type: "type",
                                    id: "id",
                                },
                                {
                                    type: "type",
                                    id: "id",
                                },
                            ],
                        },
                        segments: {
                            data: [
                                {
                                    type: "type",
                                    id: "id",
                                },
                                {
                                    type: "type",
                                    id: "id",
                                },
                            ],
                        },
                    },
                },
            ],
            links: {
                self: "self",
                prev: "prev",
                next: "next",
            },
            meta: {
                pageSize: 1,
                hasNextPage: true,
            },
            included: [
                {
                    id: "id",
                    type: "merchant",
                    attributes: {
                        attributes: {
                            key: "value",
                        },
                    },
                },
                {
                    id: "id",
                    type: "merchant",
                    attributes: {
                        attributes: {
                            key: "value",
                        },
                    },
                },
            ],
        });
    });

    test("getOffers (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.getOffers();
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("getOffers (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.getOffers();
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("getOffers (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.getOffers();
        }).rejects.toThrow(KardApi.DoesNotExistError);
    });

    test("getOffers (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/")
            .respondWith()
            .statusCode(409)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.getOffers();
        }).rejects.toThrow(KardApi.ConflictError);
    });

    test("getOffers (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.getOffers();
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("getOfferById (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            type: "standardOffer",
            id: "id",
            attributes: {
                name: "name",
                offerType: "INSTORE",
                merchantId: "merchantId",
                isLocationSpecific: true,
                status: "INACTIVE",
                merchantNetwork: "merchantNetwork",
                merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                optInRequired: true,
                qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                commissionType: "FLAT",
                commissionValue: 1.1,
                issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                userCommissionsMap: { userCommissionsMap: 1.1 },
                isCustom: true,
                terms: "terms",
                minTransactionAmount: 1,
                maxTransactionAmount: 1,
                minRewardAmount: 1,
                maxRewardAmount: 1,
                minUserRewardAmount: 1,
                maxUserRewardAmount: 1,
                startDate: "2024-01-15T09:30:00Z",
                expirationDate: "2024-01-15T09:30:00Z",
                redeemableOnce: true,
                source: "NATIONAL",
                validOfferForIssuer: { validOfferForIssuer: true },
                category: "category",
                mcc: ["mcc", "mcc"],
                displayAlways: true,
                audiences: ["audiences", "audiences"],
                segments: ["segments", "segments"],
                partnerOfferId: "partnerOfferId",
                isTargeted: true,
                attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                createdDate: "2024-01-15T09:30:00Z",
                lastModified: "2024-01-15T09:30:00Z",
            },
            links: { self: "self", prev: "prev", next: "next" },
            relationships: {
                merchant: { data: { type: "type", id: "id" } },
                merchantLocations: {
                    data: [
                        { type: "type", id: "id" },
                        { type: "type", id: "id" },
                    ],
                },
                audiences: {
                    data: [
                        { type: "type", id: "id" },
                        { type: "type", id: "id" },
                    ],
                },
                segments: {
                    data: [
                        { type: "type", id: "id" },
                        { type: "type", id: "id" },
                    ],
                },
            },
            included: [
                { id: "id", type: "merchant", attributes: { attributes: { key: "value" } } },
                { id: "id", type: "merchant", attributes: { attributes: { key: "value" } } },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/offerId")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.offers.getOfferById("offerId");
        expect(response).toEqual({
            type: "standardOffer",
            id: "id",
            attributes: {
                name: "name",
                offerType: "INSTORE",
                merchantId: "merchantId",
                isLocationSpecific: true,
                status: "INACTIVE",
                merchantNetwork: "merchantNetwork",
                merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                optInRequired: true,
                qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                commissionType: "FLAT",
                commissionValue: 1.1,
                issuerCommissionsMap: {
                    issuerCommissionsMap: 1.1,
                },
                userCommissionsMap: {
                    userCommissionsMap: 1.1,
                },
                isCustom: true,
                terms: "terms",
                minTransactionAmount: 1,
                maxTransactionAmount: 1,
                minRewardAmount: 1,
                maxRewardAmount: 1,
                minUserRewardAmount: 1,
                maxUserRewardAmount: 1,
                startDate: "2024-01-15T09:30:00Z",
                expirationDate: "2024-01-15T09:30:00Z",
                redeemableOnce: true,
                source: "NATIONAL",
                validOfferForIssuer: {
                    validOfferForIssuer: true,
                },
                category: "category",
                mcc: ["mcc", "mcc"],
                displayAlways: true,
                audiences: ["audiences", "audiences"],
                segments: ["segments", "segments"],
                partnerOfferId: "partnerOfferId",
                isTargeted: true,
                attribution: {
                    isRequired: true,
                    events: ["IMPRESSION", "IMPRESSION"],
                },
                createdDate: "2024-01-15T09:30:00Z",
                lastModified: "2024-01-15T09:30:00Z",
            },
            links: {
                self: "self",
                prev: "prev",
                next: "next",
            },
            relationships: {
                merchant: {
                    data: {
                        type: "type",
                        id: "id",
                    },
                },
                merchantLocations: {
                    data: [
                        {
                            type: "type",
                            id: "id",
                        },
                        {
                            type: "type",
                            id: "id",
                        },
                    ],
                },
                audiences: {
                    data: [
                        {
                            type: "type",
                            id: "id",
                        },
                        {
                            type: "type",
                            id: "id",
                        },
                    ],
                },
                segments: {
                    data: [
                        {
                            type: "type",
                            id: "id",
                        },
                        {
                            type: "type",
                            id: "id",
                        },
                    ],
                },
            },
            included: [
                {
                    id: "id",
                    type: "merchant",
                    attributes: {
                        attributes: {
                            key: "value",
                        },
                    },
                },
                {
                    id: "id",
                    type: "merchant",
                    attributes: {
                        attributes: {
                            key: "value",
                        },
                    },
                },
            ],
        });
    });

    test("getOfferById (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/offerId")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.getOfferById("offerId");
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("getOfferById (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/offerId")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.getOfferById("offerId");
        }).rejects.toThrow(KardApi.DoesNotExistError);
    });

    test("getOfferById (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .get("/v2/internal/offers/offerId")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.getOfferById("offerId");
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("createOffer (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            type: "standardOffer",
            id: "id",
            attributes: {
                name: "name",
                offerType: "INSTORE",
                merchantId: "merchantId",
                isLocationSpecific: true,
                status: "INACTIVE",
                merchantNetwork: "merchantNetwork",
                merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                optInRequired: true,
                qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                commissionType: "FLAT",
                commissionValue: 1.1,
                issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                userCommissionsMap: { userCommissionsMap: 1.1 },
                isCustom: true,
                terms: "terms",
                minTransactionAmount: 1,
                maxTransactionAmount: 1,
                minRewardAmount: 1,
                maxRewardAmount: 1,
                minUserRewardAmount: 1,
                maxUserRewardAmount: 1,
                startDate: "2024-01-15T09:30:00Z",
                expirationDate: "2024-01-15T09:30:00Z",
                redeemableOnce: true,
                source: "NATIONAL",
                validOfferForIssuer: { validOfferForIssuer: true },
                category: "category",
                mcc: ["mcc", "mcc"],
                displayAlways: true,
                audiences: ["audiences", "audiences"],
                segments: ["segments", "segments"],
                partnerOfferId: "partnerOfferId",
                isTargeted: true,
                attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                createdDate: "2024-01-15T09:30:00Z",
                lastModified: "2024-01-15T09:30:00Z",
            },
            links: { self: "self", prev: "prev", next: "next" },
            relationships: {
                merchant: { data: { type: "type", id: "id" } },
                merchantLocations: {
                    data: [
                        { type: "type", id: "id" },
                        { type: "type", id: "id" },
                    ],
                },
                audiences: {
                    data: [
                        { type: "type", id: "id" },
                        { type: "type", id: "id" },
                    ],
                },
                segments: {
                    data: [
                        { type: "type", id: "id" },
                        { type: "type", id: "id" },
                    ],
                },
            },
            included: [
                { id: "id", type: "merchant", attributes: { attributes: { key: "value" } } },
                { id: "id", type: "merchant", attributes: { attributes: { key: "value" } } },
            ],
        };
        server
            .mockEndpoint()
            .post("/v2/internal/offers/")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.offers.createOffer({
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: {
                        issuerCommissionsMap: 1.1,
                    },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: {
                        isRequired: true,
                        events: ["IMPRESSION", "IMPRESSION"],
                    },
                },
            },
        });
        expect(response).toEqual({
            type: "standardOffer",
            id: "id",
            attributes: {
                name: "name",
                offerType: "INSTORE",
                merchantId: "merchantId",
                isLocationSpecific: true,
                status: "INACTIVE",
                merchantNetwork: "merchantNetwork",
                merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                optInRequired: true,
                qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                commissionType: "FLAT",
                commissionValue: 1.1,
                issuerCommissionsMap: {
                    issuerCommissionsMap: 1.1,
                },
                userCommissionsMap: {
                    userCommissionsMap: 1.1,
                },
                isCustom: true,
                terms: "terms",
                minTransactionAmount: 1,
                maxTransactionAmount: 1,
                minRewardAmount: 1,
                maxRewardAmount: 1,
                minUserRewardAmount: 1,
                maxUserRewardAmount: 1,
                startDate: "2024-01-15T09:30:00Z",
                expirationDate: "2024-01-15T09:30:00Z",
                redeemableOnce: true,
                source: "NATIONAL",
                validOfferForIssuer: {
                    validOfferForIssuer: true,
                },
                category: "category",
                mcc: ["mcc", "mcc"],
                displayAlways: true,
                audiences: ["audiences", "audiences"],
                segments: ["segments", "segments"],
                partnerOfferId: "partnerOfferId",
                isTargeted: true,
                attribution: {
                    isRequired: true,
                    events: ["IMPRESSION", "IMPRESSION"],
                },
                createdDate: "2024-01-15T09:30:00Z",
                lastModified: "2024-01-15T09:30:00Z",
            },
            links: {
                self: "self",
                prev: "prev",
                next: "next",
            },
            relationships: {
                merchant: {
                    data: {
                        type: "type",
                        id: "id",
                    },
                },
                merchantLocations: {
                    data: [
                        {
                            type: "type",
                            id: "id",
                        },
                        {
                            type: "type",
                            id: "id",
                        },
                    ],
                },
                audiences: {
                    data: [
                        {
                            type: "type",
                            id: "id",
                        },
                        {
                            type: "type",
                            id: "id",
                        },
                    ],
                },
                segments: {
                    data: [
                        {
                            type: "type",
                            id: "id",
                        },
                        {
                            type: "type",
                            id: "id",
                        },
                    ],
                },
            },
            included: [
                {
                    id: "id",
                    type: "merchant",
                    attributes: {
                        attributes: {
                            key: "value",
                        },
                    },
                },
                {
                    id: "id",
                    type: "merchant",
                    attributes: {
                        attributes: {
                            key: "value",
                        },
                    },
                },
            ],
        });
    });

    test("createOffer (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/v2/internal/offers/")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.createOffer({
                data: {
                    type: "offer",
                    attributes: {
                        name: "name",
                        merchantId: "merchantId",
                        offerType: "INSTORE",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                    },
                },
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("createOffer (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/v2/internal/offers/")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.createOffer({
                data: {
                    type: "offer",
                    attributes: {
                        name: "name",
                        merchantId: "merchantId",
                        offerType: "INSTORE",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                    },
                },
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("createOffer (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/v2/internal/offers/")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(409)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.createOffer({
                data: {
                    type: "offer",
                    attributes: {
                        name: "name",
                        merchantId: "merchantId",
                        offerType: "INSTORE",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                    },
                },
            });
        }).rejects.toThrow(KardApi.ConflictError);
    });

    test("createOffer (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .post("/v2/internal/offers/")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.createOffer({
                data: {
                    type: "offer",
                    attributes: {
                        name: "name",
                        merchantId: "merchantId",
                        offerType: "INSTORE",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                    },
                },
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });

    test("updateOffer (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            type: "standardOffer",
            id: "id",
            attributes: {
                name: "name",
                offerType: "INSTORE",
                merchantId: "merchantId",
                isLocationSpecific: true,
                status: "INACTIVE",
                merchantNetwork: "merchantNetwork",
                merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                optInRequired: true,
                qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                commissionType: "FLAT",
                commissionValue: 1.1,
                issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                userCommissionsMap: { userCommissionsMap: 1.1 },
                isCustom: true,
                terms: "terms",
                minTransactionAmount: 1,
                maxTransactionAmount: 1,
                minRewardAmount: 1,
                maxRewardAmount: 1,
                minUserRewardAmount: 1,
                maxUserRewardAmount: 1,
                startDate: "2024-01-15T09:30:00Z",
                expirationDate: "2024-01-15T09:30:00Z",
                redeemableOnce: true,
                source: "NATIONAL",
                validOfferForIssuer: { validOfferForIssuer: true },
                category: "category",
                mcc: ["mcc", "mcc"],
                displayAlways: true,
                audiences: ["audiences", "audiences"],
                segments: ["segments", "segments"],
                partnerOfferId: "partnerOfferId",
                isTargeted: true,
                attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                createdDate: "2024-01-15T09:30:00Z",
                lastModified: "2024-01-15T09:30:00Z",
            },
            links: { self: "self", prev: "prev", next: "next" },
            relationships: {
                merchant: { data: { type: "type", id: "id" } },
                merchantLocations: {
                    data: [
                        { type: "type", id: "id" },
                        { type: "type", id: "id" },
                    ],
                },
                audiences: {
                    data: [
                        { type: "type", id: "id" },
                        { type: "type", id: "id" },
                    ],
                },
                segments: {
                    data: [
                        { type: "type", id: "id" },
                        { type: "type", id: "id" },
                    ],
                },
            },
            included: [
                { id: "id", type: "merchant", attributes: { attributes: { key: "value" } } },
                { id: "id", type: "merchant", attributes: { attributes: { key: "value" } } },
            ],
        };
        server
            .mockEndpoint()
            .put("/v2/internal/offers/offerId")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.offers.updateOffer("offerId", {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: {
                        issuerCommissionsMap: 1.1,
                    },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: {
                        isRequired: true,
                        events: ["IMPRESSION", "IMPRESSION"],
                    },
                },
            },
        });
        expect(response).toEqual({
            type: "standardOffer",
            id: "id",
            attributes: {
                name: "name",
                offerType: "INSTORE",
                merchantId: "merchantId",
                isLocationSpecific: true,
                status: "INACTIVE",
                merchantNetwork: "merchantNetwork",
                merchantLocationIds: ["merchantLocationIds", "merchantLocationIds"],
                optInRequired: true,
                qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                commissionType: "FLAT",
                commissionValue: 1.1,
                issuerCommissionsMap: {
                    issuerCommissionsMap: 1.1,
                },
                userCommissionsMap: {
                    userCommissionsMap: 1.1,
                },
                isCustom: true,
                terms: "terms",
                minTransactionAmount: 1,
                maxTransactionAmount: 1,
                minRewardAmount: 1,
                maxRewardAmount: 1,
                minUserRewardAmount: 1,
                maxUserRewardAmount: 1,
                startDate: "2024-01-15T09:30:00Z",
                expirationDate: "2024-01-15T09:30:00Z",
                redeemableOnce: true,
                source: "NATIONAL",
                validOfferForIssuer: {
                    validOfferForIssuer: true,
                },
                category: "category",
                mcc: ["mcc", "mcc"],
                displayAlways: true,
                audiences: ["audiences", "audiences"],
                segments: ["segments", "segments"],
                partnerOfferId: "partnerOfferId",
                isTargeted: true,
                attribution: {
                    isRequired: true,
                    events: ["IMPRESSION", "IMPRESSION"],
                },
                createdDate: "2024-01-15T09:30:00Z",
                lastModified: "2024-01-15T09:30:00Z",
            },
            links: {
                self: "self",
                prev: "prev",
                next: "next",
            },
            relationships: {
                merchant: {
                    data: {
                        type: "type",
                        id: "id",
                    },
                },
                merchantLocations: {
                    data: [
                        {
                            type: "type",
                            id: "id",
                        },
                        {
                            type: "type",
                            id: "id",
                        },
                    ],
                },
                audiences: {
                    data: [
                        {
                            type: "type",
                            id: "id",
                        },
                        {
                            type: "type",
                            id: "id",
                        },
                    ],
                },
                segments: {
                    data: [
                        {
                            type: "type",
                            id: "id",
                        },
                        {
                            type: "type",
                            id: "id",
                        },
                    ],
                },
            },
            included: [
                {
                    id: "id",
                    type: "merchant",
                    attributes: {
                        attributes: {
                            key: "value",
                        },
                    },
                },
                {
                    id: "id",
                    type: "merchant",
                    attributes: {
                        attributes: {
                            key: "value",
                        },
                    },
                },
            ],
        });
    });

    test("updateOffer (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/v2/internal/offers/offerId")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.updateOffer("offerId", {
                data: {
                    type: "offer",
                    attributes: {
                        name: "name",
                        merchantId: "merchantId",
                        offerType: "INSTORE",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                    },
                },
            });
        }).rejects.toThrow(KardApi.UnauthorizedError);
    });

    test("updateOffer (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/v2/internal/offers/offerId")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.updateOffer("offerId", {
                data: {
                    type: "offer",
                    attributes: {
                        name: "name",
                        merchantId: "merchantId",
                        offerType: "INSTORE",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                    },
                },
            });
        }).rejects.toThrow(KardApi.InvalidRequest);
    });

    test("updateOffer (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/v2/internal/offers/offerId")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.updateOffer("offerId", {
                data: {
                    type: "offer",
                    attributes: {
                        name: "name",
                        merchantId: "merchantId",
                        offerType: "INSTORE",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                    },
                },
            });
        }).rejects.toThrow(KardApi.DoesNotExistError);
    });

    test("updateOffer (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/v2/internal/offers/offerId")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(409)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.updateOffer("offerId", {
                data: {
                    type: "offer",
                    attributes: {
                        name: "name",
                        merchantId: "merchantId",
                        offerType: "INSTORE",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                    },
                },
            });
        }).rejects.toThrow(KardApi.ConflictError);
    });

    test("updateOffer (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new KardApiClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            data: {
                type: "offer",
                attributes: {
                    name: "name",
                    merchantId: "merchantId",
                    offerType: "INSTORE",
                    isLocationSpecific: true,
                    status: "INACTIVE",
                    merchantNetwork: "merchantNetwork",
                    optInRequired: true,
                    qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                    commissionType: "FLAT",
                    commissionValue: 1.1,
                    issuerCommissionsMap: { issuerCommissionsMap: 1.1 },
                    startDate: "2024-01-15T09:30:00Z",
                    expirationDate: "2024-01-15T09:30:00Z",
                    redeemableOnce: true,
                    source: "NATIONAL",
                    attribution: { isRequired: true, events: ["IMPRESSION", "IMPRESSION"] },
                },
            },
        };
        const rawResponseBody = {
            errors: [
                { status: "status", title: "title", detail: "detail" },
                { status: "status", title: "title", detail: "detail" },
            ],
        };
        server
            .mockEndpoint()
            .put("/v2/internal/offers/offerId")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.offers.updateOffer("offerId", {
                data: {
                    type: "offer",
                    attributes: {
                        name: "name",
                        merchantId: "merchantId",
                        offerType: "INSTORE",
                        isLocationSpecific: true,
                        status: "INACTIVE",
                        merchantNetwork: "merchantNetwork",
                        optInRequired: true,
                        qualifiedIssuer: ["qualifiedIssuer", "qualifiedIssuer"],
                        commissionType: "FLAT",
                        commissionValue: 1.1,
                        issuerCommissionsMap: {
                            issuerCommissionsMap: 1.1,
                        },
                        startDate: "2024-01-15T09:30:00Z",
                        expirationDate: "2024-01-15T09:30:00Z",
                        redeemableOnce: true,
                        source: "NATIONAL",
                        attribution: {
                            isRequired: true,
                            events: ["IMPRESSION", "IMPRESSION"],
                        },
                    },
                },
            });
        }).rejects.toThrow(KardApi.InternalServerError);
    });
});
